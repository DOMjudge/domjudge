<div class="mt-4 mb-4">
    <h2>Score Comparison</h2>

    {% if scoreComparisons | length > 0 %}
        {# Heatmap visualization #}
        <div id="score-heatmap"></div>
    {% else %}
        <div class="alert alert-info">
            No scoring submissions with both local and external judgments yet.
        </div>
    {% endif %}
</div>

{# Pass data to JavaScript - use JSON_HEX_TAG to escape < and > preventing script tag injection #}
<script id="score-comparisons-data" type="application/json">{{ scoreComparisons | json_encode(constant('JSON_HEX_TAG') b-or constant('JSON_HEX_AMP')) | raw }}</script>
<script id="max-score-data" type="application/json">{{ maxScore | json_encode(constant('JSON_HEX_TAG') b-or constant('JSON_HEX_AMP')) | raw }}</script>
<script id="score-diff-epsilon-data" type="application/json">{{ scoreDiffEpsilon | json_encode(constant('JSON_HEX_TAG') b-or constant('JSON_HEX_AMP')) | raw }}</script>
